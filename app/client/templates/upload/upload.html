<template name="Upload">

  <div class="genre-title-section">

    <div class="contents">

      <div class="apps-title large">APP UPLOAD</div>

    </div>

  </div>

  {{#with app}}
  <div class="upload-box">

    <div class="right-float">

      <div class="button-block">
        <div class="sandstorm-button neutral" data-action="submit">
          SUBMIT APP FOR REVIEW
        </div>
        <div class="sandstorm-button neutral">
          SAVE
        </div>
        <i class="icon-garbage"></i>
      </div>

    </div>

    <div class="section">

      <h3 class="title">Application File</h3>

      <div class="half-col">

        <div class="file-box">

          <div class="instruction">Please upload the *.spk file for your app.</div>
          <div class="aside"><a href="https://github.com/sandstorm-io/sandstorm/wiki/Porting-Guide" target="_blank">What's an *.spk?</a></div>

          <div class="spacer clearfix"></div>

          <input type="text" placeholder="Browse" readonly="true" data-field="filename" class="filename" data-action="choose-file" data-name="spk" value="{{filename}}" />
          <input type="file" class="file-picker" data-action="file-picker" data-for="spk" accept=".spk" />
          <div class="square-button dark rem-space-float" data-action="upload-spk">Upload</div>

        </div>

      </div>

      <div class="half-col">

        <h3 class="title">Title</h3>
        <input type="text" data-field="name" value="{{name}}" />

        <h3 class="title">Author</h3>
        <div class="read-only">{{getFullname author}}</div>

      </div>

    </div>

    <div class="divider"></div>

    <div class="section">

      <div class="half-col">

        <h4 class="mini-title">Ported by</h4>
        <div class="read-only">{{getFullname author}}</div>

        <h4 class="mini-title">Code URL</h4>
        <input type="text" data-field="codeLink" value="{{codeLink}}" />

        <h4 class="mini-title">License</h4>
        <input type="text" data-field="license" value="{{license}}" />

        <h4 class="mini-title">Version</h4>
        <input type="text" data-action="update-version" value="{{latestVersion}}" />

      </div>

      <div class="half-col">

        <h4 class="mini-title">Website</h4>
        <input type="text" data-field="website" value="{{webLink}}" />

        {{> connectButton service="github"}}
        {{> connectButton service="google"}}

      </div>

      <h3 class="title">Genre</h3>

      <div class="genre-list">
        {{#each categories}}

          <div class="square-button {{#if selected}}{{#if new}}light{{else}}active{{/if}}{{/if}}" data-action="select-genre">{{upperCase name}}</div>

        {{/each}}

        {{#if suggestNewGenre}}
        <input class="square-button action input" data-field="new-genre-name" value={{newGenreName}} /><div class="square-button icon" data-action="save-genre"><i class="fa fa-plus"></i></div>
        {{else}}
        <div class="square-button action" data-action="suggest-genre">SUGGEST A NEW GENRE</div>
        {{/if}}
      </div>

    </div>

    <div class="divider"></div>

    <div class="section">

      <div class="half-col">

        <h3 class="title">Icon</h3>

        <div class="identicon-container">
          <img src="{{#if image}}{{imageUrl image}}{{else}}{{identicon seedString size=5 scale=50}}{{/if}}" data-field="icon-image" />
          <div class="regenerate" data-action="regenerate-identicon"><i class="icon-rejected_dark"></i></div>
          <div class="upload" data-action="choose-file" data-name="identicon"><i class="icon-myapps"></i></div>
        </div>

        <input type="file" class="file-picker" data-action="file-picker" data-for="identicon" accept="image/*" />

        <div class="identicon-instructions">
          <div>For the best results, we suggest the icon be:</div>
          <div><strong>600px</strong> wide by <strong>600px</strong> high (minimum) in PNG or JPEG format.</div>
        </div>

      </div>

      <div class="half-col">

        <h3 class="title">Display in Market?</h3>

        <div class="public-private">
          <div class="sandstorm-button left {{#if public}}active{{/if}} small" data-action="toggle-private">
            <i class="fa fa-eye"></i>
            PUBLIC
          </div>
          <div class="sandstorm-button right {{#unless public}}active{{/unless}} small" data-action="toggle-private">
            <i class="fa fa-lock"></i>
            PRIVATE
          </div>
        </div>

        <h3 class="title">Suggested Donation <i class="fa fa-caret-down"></i></h3>

      </div>

    </div>

    <div class="divider"></div>

    <div class="section">

      <h3 class="title">Screenshots</h3>

      {{#each screenshots}}

        <div class="screenshot-container">
          <div class="screenshot" style="background-image: url('{{imageUrl this}}')" data-action="change-screenshot"></div>
          <div class="remove" data-action="remove-screenshot"><i class="icon-rejected_dark"></i></div>
        </div>

      {{/each}}
      {{#each screenshotPlaceholders}}

        <div class="screenshot-container">
          <div class="screenshot placeholder" data-action="choose-file" data-name="screenshot">
            <div class="contents">
              <i class="icon-myapps"></i>
              <div class="instruction">
                Upload a Screenshot
              </div>
            </div>
          </div>
        </div>

      {{/each}}

      <input type="file" class="file-picker" data-action="file-picker" data-for="screenshot" accept="image/*" />

      <h3 class="title">Description</h3>

      <textarea class="description" data-field="description" placeholder="What does your app do?">{{description}}</textarea>

    </div>

    <div class="right-float">

      <div class="button-block">
        <div class="sandstorm-button neutral" data-action="submit">
          SUBMIT APP FOR REVIEW
        </div>
        <div class="sandstorm-button neutral">
          SAVE
        </div>
        <i class="icon-garbage"></i>
      </div>

    </div>

  </div>
  {{/with}}

</template>
