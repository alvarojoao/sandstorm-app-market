<template name="SingleApp">

  <div class="apps-by-me-standard">

      <div class="single-app-container">

      {{#if routerSubsReady}}

      <div class="app-table-large">

        {{#with app}}

        <div class="single-app-container">

          <div class="app-item-inner">

            <div class="image-section">

              <div class="image-surround-full-width">

                <div class="image" style="background-image: url('{{imageUrl image}}');"></div>

              </div>

            </div>

            <div class="text-section">

              <div class="top-section clearfix">

                <div class="left-float">

                  <div class="header">{{name}}</div>

                  <div class="app-author-full-width">{{getUsername author}}</div>

                </div>

              </div>

              <div class="bottom-section clearfix">

                <div class="half-col">

                  <div class="date">{{dateFormat createdAt 'MMMM DD, YYYY'}}</div>
                  <div class="genre">{{category}}</div>

                </div>

                <div class="half-col">

                  <div class="key">Ported by:</div><div class="value">{{getUsername author}}</div>
                  <div class="key">License:</div><div class="value">MIT TODO</div>
                  <div class="key">Code:</div><div class="value">On Github TODO</div>
                  <div class="key">Version:</div><div class="value">{{getLatestVersion}}</div>

                </div>

                <div class="ratings-bar">

                  <div class="left-float">
                    <div class="app-rating">
                      {{{appRating stars}}}
                    </div>
                    <span>( {{ratingsCount}} )</span>
                  </div>

                  <div class="right-float social">
                    <i class="icon-tw"></i>
                    <i class="icon-go"></i>
                    <i class="icon-fb"></i>
                  </div>

                </div>

                <div class="action-buttons clearfix">

                  <div class="install button" data-action="install">INSTALL <i class="icon-arrow-install"></i></div>
                  <div class="chip-in button" data-action="chip-in">CHIP IN <i class="fa fa-money"></i></div>
                  <div class="blurb">This app is free, and if you like it, feel free to chip in.</div>

                </div>

              </div>

            </div>

            {{> carousel images=screenshots}}

            <div class="header">Description</div>
            <div class="right-float option" data-action="flag-app">
              Flag this app
              <i class="{{#if flagged}}icon-flagged_dark{{else}}icon-flagged_light{{/if}}"></i>
            </div>

            <div class="divider clearfix"></div>

            <div class="description">

              {{#if flagApp}}
                {{> flagBox flagDetails}}
              {{/if}}

              <div class="text">
                {{{getDescription description}}}
              </div>

              <div class="read-more-bar">
                <div class="read-more" data-action="read-more">
                  Read More <i class="fa {{#if readMore}}fa-caret-up{{else}}fa-caret-down{{/if}}"></i>
                </div>
              </div>
            </div>

          </div>

        </div>

        {{/with}}

      </div>

      {{/if}}

    </div>

  </div>

</template>

<template name="carousel">

  <div class="carousel">

    <div class="prev-button" data-action="carousel-prev"><i class="fa fa-angle-left"></i></div>
    <div class="owl-carousel">
      {{#each images}}
      <div class="screenshot-container">
        <div class="screenshot" style="background-image: url('{{screenshotImageUrl this}}')"></div>
      </div>
      {{/each}}
    </div>
    <div class="next-button" data-action="carousel-next"><i class="fa fa-angle-right"></i></div>

  </div>

</template>

<template name="flagBox">

  <form class="flag-box">
    <div>I believe this app is:</div>
    <div class="divider"></div>
    <div>
      <div>
        <input type="radio" data-category="inappropriate" id="inappropriate" name="flag-reason">
        <label for="inappropriate"><span class="vis-radio"><span></span></span><span>Inappropriate</span></label>
      </div>
      <div>
        <input type="radio" data-category="spam" id="spam" name="flag-reason">
        <label for="spam"><span class="vis-radio"><span></span></span><span>Spam</span></label>
      </div>
      <div>
        <input type="radio" data-category="duplicate" id="duplicate" name="flag-reason">
        <label for="duplicate"><span class="vis-radio"><span></span></span><span>Duplicate</span></label>
      </div>
      <div>
        <input type="radio" data-category="plagiarized" id="plagiarized" name="flag-reason">
        <label for="plagiarized"><span class="vis-radio"><span></span></span><span>Plagiarized</span></label>
      </div>
      <div>
        <input type="radio" data-category="other" id="other" name="flag-reason">
        <label for="other"><span class="vis-radio"><span></span></span><span>Other</span></label>
      </div>
    </div>
    <input type="text" data-field="flag-other" />
    <div>Additional information:</div>
    {{!-- <textarea data-field="additional-info" resize="none"></textarea> --}}
    <div class="additional-info" data-field="additional-info" contenteditable>{{additional}}</div>
    <div class="button" data-action="submit-flag-app">SUBMIT</div>
    <div class="button" data-action="flag-app">CLOSE</div>
  </form>

</template>
